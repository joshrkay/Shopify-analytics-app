# ==============================================================================
# Environment Configuration Example
# ==============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control.
# ==============================================================================

# ==============================================================================
# Core Application
# ==============================================================================
ENV=development

# ==============================================================================
# Database (PostgreSQL)
# ==============================================================================
DATABASE_URL=postgresql://markinsight_user:password@localhost:5432/markinsight

# ==============================================================================
# Redis Cache
# ==============================================================================
REDIS_URL=redis://localhost:6379

# ==============================================================================
# Authentication (Clerk)
# ==============================================================================
# Clerk Frontend API URL (e.g., your-app.clerk.accounts.dev or clerk.yourdomain.com)
CLERK_FRONTEND_API=<your-clerk-frontend-api-url>
# Clerk Secret Key (for backend operations if needed)
CLERK_SECRET_KEY=<your-clerk-secret-key>
# Clerk Publishable Key (for frontend - also set in frontend/.env)
VITE_CLERK_PUBLISHABLE_KEY=<your-clerk-publishable-key>
# Clerk Webhook Secret (from Clerk Dashboard -> Webhooks -> Signing Secret)
# Used for verifying webhook signatures from Clerk
CLERK_WEBHOOK_SECRET=<your-clerk-webhook-secret>

# ==============================================================================
# Shopify App Credentials
# ==============================================================================
SHOPIFY_API_KEY=<your-shopify-api-key>
SHOPIFY_API_SECRET=<your-shopify-api-secret>
SHOPIFY_BILLING_RETURN_URL=https://your-app-domain.com/api/billing/callback

# ==============================================================================
# AI / LLM (OpenRouter)
# ==============================================================================
OPENROUTER_API_KEY=<your-openrouter-api-key>

# ==============================================================================
# Security
# ==============================================================================
# 32-byte base64 encoded encryption key for secrets at rest
ENCRYPTION_KEY=<generate-with-openssl-rand-base64-32>

# ==============================================================================
# Airbyte Configuration
# ==============================================================================
# Base URL for Airbyte Cloud API
AIRBYTE_BASE_URL=https://api.airbyte.com/v1

# Workspace ID from Airbyte Cloud
AIRBYTE_WORKSPACE_ID=<your-airbyte-workspace-id>

# API token generated from Airbyte Cloud workspace settings
# Generate at: Workspace Settings -> API Tokens -> Generate Token
# Store securely in production (AWS Secrets Manager, HashiCorp Vault, etc.)
AIRBYTE_API_TOKEN=<your-airbyte-api-token>

# ==============================================================================
# Airbyte Worker Configuration
# ==============================================================================
# Maximum time to wait for a sync job to complete (default: 1 hour)
WORKER_AIRBYTE_SYNC_TIMEOUT_SECONDS=3600

# Interval between sync status checks (default: 30 seconds)
WORKER_SYNC_CHECK_INTERVAL_SECONDS=30

# Maximum concurrent sync jobs (default: 5)
WORKER_MAX_CONCURRENT_SYNCS=5

# ==============================================================================
# Superset (Embedded Analytics)
# ==============================================================================
# Secret key for Superset Flask app (generate: python -c "import secrets; print(secrets.token_hex(32))")
SUPERSET_SECRET_KEY=<generate-a-secure-random-hex-string>

# Superset metadata database (separate from app database)
SUPERSET_METADATA_DB_URI=postgresql://markinsight_user:password@localhost:5432/superset_metadata

# JWT secret shared between backend (token generation) and Superset (token verification)
# Used by EmbedTokenService and SupersetJWTSecurityManager
SUPERSET_JWT_SECRET=<shared-secret-for-embed-tokens>

# Previous JWT secret for key rotation (set when rotating SUPERSET_JWT_SECRET)
SUPERSET_JWT_SECRET_PREVIOUS=

# Superset base URL for generating embed dashboard URLs
SUPERSET_EMBED_URL=http://localhost:8088
